---
id: 1743262652-XZWP
aliases:
  - Requirements TinyURL
tags:
  - System Design
---

# Requirements

## Requirements for URL Shortening Design

  Let’s look at the functional and non-functional requirements for the service we’ll be designing:

- Functional requirements
  - Short URL generation: Our service should be able to generate a unique shorter alias of the given URL.
  - Redirection: Given a short link, our system should be able to redirect the user to the original URL.
  - Custom short links: Users should be able to generate custom short links for their URLs using our system.
  - Deletion: Users should be able to delete a short link generated by our system, given the rights.
  - Update: Users should be able to update the long URL associated with the short link, given the proper rights.
  - Expiry time: There must be a default expiration time for the short links, but users should be able to set the expiration time based on their requirements.

- Non-functional requirements
  - Availability: Our system should be highly available, because even a fraction of the second downtime would result in URL redirection failures. Since our system’s domain is in URLs, we don’t have the leverage of downtime, and our design must have fault-tolerance conditions instilled in it.
  - Scalability: Our system should be horizontally scalable with increasing demand.
  - Readability: The short links generated by our system should be easily readable, distinguishable, and typeable.
  - Latency: The system should perform at low latency to provide the user with a smooth experience.
  - Unpredictability: From a security standpoint, the short links generated by our system should be highly unpredictable. This ensures that the next-in-line short URL is not serially produced, eliminating the possibility of someone guessing all the short URLs that our system has ever produced or will produce.
    ![Functional and non-functional requirements](../../assets/imgs/tiny-url-requirements.png)

## Resource estimation

- It’s better to have realistic estimations at the start. For instance, we might need to change them in the future based on the design modifications. Let’s make some assumptions to complete our estimation.
- Assumptions
  - We assume that the shortening:redirection request ratio is 1:100.
  - There are 200 million new URL shortening requests per month.
  - A URL shortening entry requires 500 Bytes of database storage.
  - Each entry will have a maximum of five years of expiry time, unless explicitly deleted.
  - There are 100 million Daily Active Users (DAU).

- Storage estimation
  - Since entries are saved for a time period of 5 years and there are a total of 200 million entries per month, the total entries will be approximately 12 billion.

    $$\text{200 Million/month} \times \text{12 months/year} \times \text{5 years}=\text{12 Billion URL shortening requests}$$
Since each entry is 500 Bytes, the total storage estimate would be 6 TB:
    $$\text{12 Billion} \times \text{500 Bytes}= \text{6 TB}$$

    ![URL Shortening Service Storage Estimation Calculator](../../assets/imgs/tiny-url-storage-estimation.png)
    ![Total storage required by the URL shortening service in 5 years](../../assets/imgs/tiny-url-storage.png)

## Query rate estimation

- Based on the estimations above, we can expect 20 billion redirection requests per month.
  $$ \text{200 Million} \times 100=\text{20 Billion} $$
- We can extend our calculations for Queries Per Second (QPS) for our system from this baseline. The number of seconds in one month, given the average number of days per month is $ 365/12 = 30.42$:

  $$ \text{30.42 days} \times \text{24 hours} \times \text{60 minutes} \times \text{60 seconds}= \text{2628288 seconds}$$

- Considering the calculation above, new URL shortening requests per second will be:

  $$\dfrac{\text{200 Million}}{\text{2628288 seconds}}=\text{76 URLs/s}$$

- With a 1:100 shortening to redirecting ratio, the URL redirection rate per second will be:

  $$100\times76 URLs/s=7.6 K URLs/s$$

## Bandwidth estimation

- Shortening requests: The expected arrival rate will be 76 new URLs per second. The total incoming data would be 304 Kbps304 Kbps per second:

  $$76 \times 500 Bytes \times 8 bits=304 Kbps$$

![The total bandwidth required by the URL shortening service](../../assets/imgs/tiny-url-bandwidth.png)
- Redirection requests: Since the expected rate would be 20K URLs redirections per second, the total outgoing data would be 30.4Mbps30.4Mbps per second: 7.6 K×500 Bytes×8 bits=30.4 Mbps7.6 K×500 Bytes×8 bits=30.4 Mbps
